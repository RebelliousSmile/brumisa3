# =============================================================================
# Configuration de production - brumisater
# =============================================================================
# IMPORTANT: Changer TOUS les secrets avant déploiement !

# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
BASE_URL=https://generateur-pdf-jdr.fr

# =============================================================================
# BASE DE DONNEES POSTGRESQL
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=brumisa3_prod
POSTGRES_USER=brumisater_user
POSTGRES_PASSWORD=CHANGE_IN_PRODUCTION_STRONG_PASSWORD

# URL complète avec SSL requis
DATABASE_URL=postgresql://brumisater_user:CHANGE_IN_PRODUCTION_STRONG_PASSWORD@localhost:5432/brumisa3_prod?sslmode=require

# =============================================================================
# SESSIONS & SECURITE - CHANGER EN PRODUCTION !
# =============================================================================
SESSION_SECRET=CHANGE_THIS_TO_RANDOM_32_CHARS_STRING_PRODUCTION
SESSION_MAX_AGE=86400000
CSRF_SECRET=CHANGE_THIS_TO_ANOTHER_RANDOM_32_CHARS_STRING

# =============================================================================
# CODES D'ACCES - CHANGER EN PRODUCTION !
# =============================================================================
CODE_PREMIUM=CHANGE_PREMIUM_CODE
CODE_ADMIN=CHANGE_ADMIN_CODE

# =============================================================================
# EMAIL (RESEND) - CONFIGURER EN PRODUCTION
# =============================================================================
RESEND_API_KEY=re_your_production_resend_api_key
RESEND_FROM_EMAIL=noreply@generateur-pdf-jdr.fr
RESEND_FROM_NAME=Brumisater - Générateur PDF JDR

# Emails de production
ADMIN_EMAIL=admin@generateur-pdf-jdr.fr
TEST_EMAIL=test@generateur-pdf-jdr.fr

# Production : toujours envoyer les emails réels
FORCE_REAL_EMAILS=true

# =============================================================================
# STRIPE (DONATIONS) - CLÉS DE PRODUCTION
# =============================================================================
STRIPE_SECRET_KEY=sk_live_your_production_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_production_webhook_secret

# =============================================================================
# REPERTOIRES (chemins absolus en production)
# =============================================================================
DATA_DIR=/var/app/data
OUTPUT_DIR=/var/app/output
UPLOAD_DIR=/var/app/uploads
LOG_DIR=/var/log/brumisater

# =============================================================================
# LOGS ET MONITORING
# =============================================================================
LOG_LEVEL=info
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14
LOG_DATE_PATTERN=YYYY-MM-DD

# =============================================================================
# RATE LIMITING (plus strict en production)
# =============================================================================
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=50
RATE_LIMIT_SKIP_SUCCESS=true

# =============================================================================
# PDF GENERATION (optimisé pour production)
# =============================================================================
PDF_TIMEOUT=60000
PDF_MAX_SIZE=20971520
PDF_GENERATION_TARGET=2000
API_RESPONSE_TARGET=500

# =============================================================================
# CACHE ET PERFORMANCE
# =============================================================================
CACHE_DEFAULT_TTL=300000
CACHE_MAX_SIZE=2000
CACHE_CLEANUP_INTERVAL=60000

# =============================================================================
# QUEUE SYSTEM
# =============================================================================
QUEUE_MAX_CONCURRENCY=4
QUEUE_JOB_TIMEOUT=120000
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=10000

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================
PERF_MAX_HISTORY=2000
PERF_SLOW_THRESHOLD=1000
PERF_ALERT_THRESHOLD=5000
PERF_RETENTION=86400000

# =============================================================================
# SSL/HTTPS (requis en production)
# =============================================================================
HTTPS_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/generateur-pdf-jdr.fr/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/generateur-pdf-jdr.fr/privkey.pem
FORCE_HTTPS=true

# =============================================================================
# SECURITE AVANCEE
# =============================================================================
HELMET_ENABLED=true
CORS_ORIGIN=https://generateur-pdf-jdr.fr
TRUST_PROXY=true

# =============================================================================
# CLUSTERING (PM2)
# =============================================================================
CLUSTER_MODE=true
INSTANCE_COUNT=max

# =============================================================================
# BACKUP ET MAINTENANCE
# =============================================================================
AUTO_BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
CLEANUP_OLD_FILES=true
CLEANUP_INTERVAL=86400000

# =============================================================================
# MONITORING EXTERNE (optionnel)
# =============================================================================
# SENTRY_DSN=https://your-sentry-dsn
# DATADOG_API_KEY=your-datadog-key
# NEWRELIC_LICENSE_KEY=your-newrelic-key

# =============================================================================
# MAINTENANCE MODE
# =============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Application en cours de maintenance. Retour prévu dans quelques minutes.

# =============================================================================
# VARIABLES DE PRODUCTION SPÉCIFIQUES
# =============================================================================
ENABLE_METRICS_ENDPOINT=true
ENABLE_HEALTH_CHECK=true
GRACEFUL_SHUTDOWN_TIMEOUT=30000