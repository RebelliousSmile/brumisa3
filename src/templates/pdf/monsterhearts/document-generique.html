<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{titre}}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Source+Serif+4:wght@400;600;700&display=swap');
        
        /* Reset et base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Source Serif 4', serif;
            font-size: 11pt;
            line-height: 1.6;
            color: #2d1b3d;
            background: linear-gradient(135deg, #1e1232 0%, #3a1a5c 50%, #2d1b3d 100%);
            margin: 0;
            padding: 20mm;
        }
        
        /* Container principal */
        .document-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
            overflow: hidden;
            position: relative;
        }
        
        /* Header avec d√©grad√© Monsterhearts */
        .header {
            background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 50%, #ec4899 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="30" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="60" cy="70" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="30" cy="80" r="2.5" fill="rgba(255,255,255,0.1)"/></svg>');
            pointer-events: none;
        }
        
        .header h1 {
            font-family: 'Crimson Text', serif;
            font-size: 28pt;
            font-weight: 600;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .header .subtitle {
            font-size: 12pt;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        /* Contenu principal */
        .content {
            padding: 30px;
        }
        
        /* Titres */
        h2 {
            font-family: 'Crimson Text', serif;
            font-size: 18pt;
            font-weight: 600;
            color: #8b5cf6;
            margin-top: 25px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #8b5cf6;
            page-break-after: avoid;
        }
        
        h2:first-child {
            margin-top: 0;
        }
        
        h3 {
            font-family: 'Crimson Text', serif;
            font-size: 14pt;
            font-weight: 600;
            color: #6d28d9;
            margin-top: 20px;
            margin-bottom: 12px;
            page-break-after: avoid;
        }
        
        h4 {
            font-size: 12pt;
            font-weight: 600;
            color: #7c3aed;
            margin-top: 15px;
            margin-bottom: 8px;
            page-break-after: avoid;
        }
        
        /* Paragraphes */
        p {
            margin-bottom: 12px;
            text-align: justify;
            hyphens: auto;
        }
        
        .intro {
            font-size: 12pt;
            font-style: italic;
            color: #6b46c1;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #8b5cf6;
            margin-bottom: 20px;
        }
        
        /* Listes */
        ul, ol {
            margin-left: 20px;
            margin-bottom: 12px;
        }
        
        li {
            margin-bottom: 6px;
            text-align: justify;
        }
        
        /* Listes avec puces personnalis√©es */
        ul li::marker {
            content: "‚ô• ";
            color: #ec4899;
        }
        
        /* Sections sp√©ciales */
        .conseil {
            background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%);
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }
        
        .conseil::before {
            content: "üí°";
            position: absolute;
            top: -8px;
            left: 15px;
            background: white;
            padding: 0 5px;
            font-size: 16px;
        }
        
        .attention {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }
        
        .attention::before {
            content: "‚ö†Ô∏è";
            position: absolute;
            top: -8px;
            left: 15px;
            background: white;
            padding: 0 5px;
            font-size: 16px;
        }
        
        .exemple {
            background: linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%);
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }
        
        .exemple::before {
            content: "üìù";
            position: absolute;
            top: -8px;
            left: 15px;
            background: white;
            padding: 0 5px;
            font-size: 16px;
        }
        
        /* Citations */
        blockquote {
            border-left: 4px solid #ec4899;
            padding-left: 15px;
            margin: 15px 0;
            font-style: italic;
            color: #6b46c1;
        }
        
        /* Code et √©l√©ments techniques */
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 10pt;
            color: #1e293b;
        }
        
        /* Tableaux */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 10pt;
        }
        
        th, td {
            border: 1px solid #d1d5db;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background: #f9fafb;
        }
        
        /* S√©parateurs */
        hr {
            border: none;
            height: 2px;
            background: linear-gradient(90deg, transparent, #8b5cf6, transparent);
            margin: 25px 0;
        }
        
        /* Footer */
        .footer {
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            padding: 15px 30px;
            text-align: center;
            font-size: 9pt;
            color: #64748b;
        }
        
        /* Gestion des sauts de page */
        .section {
            page-break-inside: avoid;
        }
        
        .section h2 {
            page-break-before: auto;
        }
        
        /* Classes utilitaires */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .bold { font-weight: 600; }
        .italic { font-style: italic; }
        .small { font-size: 10pt; }
        .large { font-size: 13pt; }
        
        /* Espacement */
        .mt-1 { margin-top: 5px; }
        .mt-2 { margin-top: 10px; }
        .mt-3 { margin-top: 15px; }
        .mb-1 { margin-bottom: 5px; }
        .mb-2 { margin-bottom: 10px; }
        .mb-3 { margin-bottom: 15px; }
        
        /* Media queries pour l'impression */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .document-container {
                box-shadow: none;
                border-radius: 0;
            }
            
            .header {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            .conseil, .attention, .exemple {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            h2 {
                page-break-before: auto;
            }
        }
    </style>
</head>
<body>
    <div class="document-container">
        <!-- Header -->
        <div class="header">
            <h1>{{titre}}</h1>
            <div class="subtitle">{{sous_titre}}</div>
        </div>
        
        <!-- Contenu principal -->
        <div class="content">
            {{#if introduction}}
            <div class="intro">
                {{introduction}}
            </div>
            {{/if}}
            
            {{#each sections}}
            <div class="section">
                <h2>{{titre}}</h2>
                
                {{#if description}}
                <p>{{description}}</p>
                {{/if}}
                
                {{#each contenu}}
                    {{#if (eq type 'paragraphe')}}
                    <p>{{{texte}}}</p>
                    {{/if}}
                    
                    {{#if (eq type 'sous_section')}}
                    <h3>{{titre}}</h3>
                    {{#if description}}
                    <p>{{description}}</p>
                    {{/if}}
                    {{#each elements}}
                        {{#if (eq type 'paragraphe')}}
                        <p>{{{texte}}}</p>
                        {{/if}}
                        {{#if (eq type 'liste')}}
                        <{{balise}}>
                        {{#each items}}
                        <li>{{{this}}}</li>
                        {{/each}}
                        </{{balise}}>
                        {{/if}}
                        {{#if (eq type 'conseil')}}
                        <div class="conseil">
                            {{{texte}}}
                        </div>
                        {{/if}}
                        {{#if (eq type 'attention')}}
                        <div class="attention">
                            {{{texte}}}
                        </div>
                        {{/if}}
                        {{#if (eq type 'exemple')}}
                        <div class="exemple">
                            {{{texte}}}
                        </div>
                        {{/if}}
                    {{/each}}
                    {{/if}}
                    
                    {{#if (eq type 'liste')}}
                    <{{balise}}>
                    {{#each items}}
                    <li>{{{this}}}</li>
                    {{/each}}
                    </{{balise}}>
                    {{/if}}
                    
                    {{#if (eq type 'conseil')}}
                    <div class="conseil">
                        {{{texte}}}
                    </div>
                    {{/if}}
                    
                    {{#if (eq type 'attention')}}
                    <div class="attention">
                        {{{texte}}}
                    </div>
                    {{/if}}
                    
                    {{#if (eq type 'exemple')}}
                    <div class="exemple">
                        {{{texte}}}
                    </div>
                    {{/if}}
                    
                    {{#if (eq type 'separateur')}}
                    <hr>
                    {{/if}}
                {{/each}}
            </div>
            {{/each}}
        </div>
        
        <!-- Footer -->
        <div class="footer">
            Cr√©√© avec le G√©n√©rateur PDF JDR - brumisa3.fr | 
            Document Monsterhearts - {{#if auteur}}Par {{auteur}}{{else}}Ressource communautaire{{/if}}
        </div>
    </div>
</body>
</html>