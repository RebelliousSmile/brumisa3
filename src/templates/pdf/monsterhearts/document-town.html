<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monsterhearts - Cadre de Ville</title>
    <style>
        /* Variables CSS Monsterhearts - Romance Gothique */
        :root {
            --mh-primary: #8b5cf6;      /* Violet gothique */
            --mh-secondary: #a855f7;    /* Violet plus clair */
            --mh-accent: #ec4899;       /* Rose passion */
            --mh-dark: #2d1b3d;         /* Violet très sombre */
            --mh-bg: linear-gradient(135deg, #1e1232 0%, #3a1a5c 50%, #2d1b3d 100%);
            --mh-text: #f8fafc;
            --mh-text-secondary: #d1d5db;
            --mh-border: #8b5cf6;
        }

        /* Reset et polices */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Police thématique - Élégance gothique */
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        body {
            font-family: 'Crimson Text', 'Georgia', serif;
            font-size: 12pt;
            line-height: 1.6;
            color: var(--mh-text);
            background: var(--mh-bg);
            padding: 20mm;
        }

        /* Bande latérale caractéristique Monsterhearts */
        .sidebar {
            position: fixed;
            right: 0;
            top: 0;
            bottom: 0;
            width: 15mm;
            background: var(--mh-dark);
            color: var(--mh-text);
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            font-size: 14pt;
            letter-spacing: 2px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            border-left: 3px solid var(--mh-primary);
        }

        /* Header élégant */
        .document-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .document-header::before {
            content: '♠';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            color: var(--mh-accent);
            opacity: 0.7;
        }

        .document-title {
            font-family: 'Playfair Display', serif;
            font-size: 32pt;
            font-weight: 700;
            color: var(--mh-primary);
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .document-subtitle {
            font-family: 'Crimson Text', serif;
            font-size: 16pt;
            font-style: italic;
            color: var(--mh-accent);
            text-align: center;
            margin-bottom: 5px;
        }

        .document-tagline {
            font-size: 10pt;
            color: var(--mh-text-secondary);
            text-align: center;
            font-style: italic;
        }

        /* Sections gothiques */
        .town-section {
            background: rgba(45, 27, 61, 0.3);
            border: 1px solid var(--mh-border);
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .town-section::before {
            content: '❦';
            position: absolute;
            top: -8px;
            left: 20px;
            background: var(--mh-bg);
            color: var(--mh-accent);
            font-size: 16pt;
            padding: 0 10px;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 18pt;
            font-weight: 700;
            color: var(--mh-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--mh-accent);
        }

        /* Informations de base de la ville */
        .town-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .info-field {
            margin-bottom: 15px;
        }

        .field-label {
            font-family: 'Playfair Display', serif;
            font-size: 11pt;
            font-weight: 700;
            color: var(--mh-accent);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .field-value {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--mh-border);
            border-radius: 4px;
            padding: 12px;
            color: var(--mh-text);
            line-height: 1.5;
            min-height: 40px;
        }

        /* Lieux emblématiques */
        .locations-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .location-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid var(--mh-primary);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .location-card:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .location-name {
            font-family: 'Playfair Display', serif;
            font-size: 14pt;
            font-weight: 700;
            color: var(--mh-accent);
            margin-bottom: 8px;
        }

        .location-type {
            font-size: 9pt;
            color: var(--mh-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .location-description {
            font-size: 10pt;
            color: var(--mh-text-secondary);
            line-height: 1.4;
            font-style: italic;
        }

        /* Personnages Non-Joueurs */
        .npcs-section {
            background: rgba(236, 72, 153, 0.1);
            border-left: 4px solid var(--mh-accent);
            padding: 20px;
            margin-bottom: 20px;
        }

        .npc-entry {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }

        .npc-entry::before {
            content: '♦';
            position: absolute;
            top: 10px;
            right: 15px;
            color: var(--mh-accent);
            font-size: 14pt;
        }

        .npc-name {
            font-family: 'Playfair Display', serif;
            font-size: 13pt;
            font-weight: 700;
            color: var(--mh-accent);
            margin-bottom: 5px;
        }

        .npc-role {
            font-size: 9pt;
            color: var(--mh-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .npc-description {
            font-size: 10pt;
            color: var(--mh-text-secondary);
            line-height: 1.5;
            font-style: italic;
        }

        /* Secrets et intrigues */
        .secrets-section {
            background: rgba(45, 27, 61, 0.5);
            border: 2px dashed var(--mh-accent);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }

        .secrets-section::before {
            content: '♥ SECRETS & INTRIGUES ♥';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--mh-accent);
            color: white;
            padding: 4px 15px;
            font-family: 'Playfair Display', serif;
            font-size: 9pt;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .secret-item {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid var(--mh-accent);
            border-radius: 0 4px 4px 0;
        }

        .secret-text {
            font-style: italic;
            color: var(--mh-accent);
            line-height: 1.5;
        }

        /* Ambiance et atmosphère */
        .atmosphere-section {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .atmosphere-text {
            font-family: 'Playfair Display', serif;
            font-size: 14pt;
            font-style: italic;
            color: var(--mh-text);
            line-height: 1.8;
            text-align: justify;
        }

        .atmosphere-text::before {
            content: '"';
            font-size: 60pt;
            color: var(--mh-accent);
            opacity: 0.3;
            float: left;
            line-height: 40pt;
            margin-right: 10px;
            margin-top: -10px;
        }

        .atmosphere-text::after {
            content: '"';
            font-size: 60pt;
            color: var(--mh-accent);
            opacity: 0.3;
            float: right;
            line-height: 40pt;
            margin-left: 10px;
            margin-bottom: -40px;
        }

        /* Footer élégant */
        .document-footer {
            position: fixed;
            bottom: 15mm;
            left: 20mm;
            right: 30mm;
            text-align: center;
            font-size: 9pt;
            color: var(--mh-text-secondary);
            border-top: 1px solid var(--mh-border);
            padding-top: 10px;
        }

        .footer-flourish {
            color: var(--mh-accent);
            font-size: 14pt;
            margin: 0 10px;
        }

        /* Print styles */
        @media print {
            body {
                background: white !important;
                color: black !important;
            }
            
            .sidebar {
                background: #2d1b3d !important;
                color: white !important;
                -webkit-print-color-adjust: exact;
            }
            
            .town-section {
                background: #f8f9fa !important;
                border: 1px solid #8b5cf6 !important;
            }
        }
    </style>
</head>
<body>
    <div class="document-container">
        <!-- Sidebar Monsterhearts -->
        <div class="sidebar">
            <%- donnees.nom_ville || 'Ville Gothique' %>
        </div>

        <!-- Header -->
        <header class="document-header">
            <h1 class="document-title"><%- donnees.nom_ville || 'Darkwood Falls' %></h1>
            <h2 class="document-subtitle">Cadre de Ville</h2>
            <p class="document-tagline">« Où les secrets dansent avec les ombres »</p>
        </header>

        <!-- Informations générales de la ville -->
        <section class="town-section">
            <h3 class="section-title">Portrait de la Ville</h3>
            <div class="town-info">
                <div class="info-column">
                    <div class="info-field">
                        <div class="field-label">Population</div>
                        <div class="field-value"><%- donnees.population || '12,000 âmes perdues' %></div>
                    </div>
                    <div class="info-field">
                        <div class="field-label">Fondée en</div>
                        <div class="field-value"><%- donnees.fondation || '1847' %></div>
                    </div>
                    <div class="info-field">
                        <div class="field-label">Climat</div>
                        <div class="field-value"><%- donnees.climat || 'Brumeux et mélancolique' %></div>
                    </div>
                </div>
                <div class="info-column">
                    <div class="info-field">
                        <div class="field-label">Réputation</div>
                        <div class="field-value"><%- donnees.reputation || 'Mystérieuse et séduisante' %></div>
                    </div>
                    <div class="info-field">
                        <div class="field-label">Économie Principale</div>
                        <div class="field-value"><%- donnees.economie || 'Tourisme gothique' %></div>
                    </div>
                    <div class="info-field">
                        <div class="field-label">Particularité</div>
                        <div class="field-value"><%- donnees.particularite || 'Phénomènes étranges fréquents' %></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lieux emblématiques -->
        <section class="town-section">
            <h3 class="section-title">Lieux de Rencontre</h3>
            <div class="locations-grid">
                <% if (donnees.lieux && donnees.lieux.length > 0) { %>
                    <% donnees.lieux.forEach(lieu => { %>
                        <div class="location-card">
                            <div class="location-name"><%- lieu.nom %></div>
                            <div class="location-type"><%- lieu.type || 'Lieu mystérieux' %></div>
                            <div class="location-description"><%- lieu.description %></div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="location-card">
                        <div class="location-name">Le Lycée Ravenscroft</div>
                        <div class="location-type">Établissement scolaire</div>
                        <div class="location-description">Un lycée gothique où les adolescents découvrent leurs véritables natures. Les corridors résonnent de secrets et de désirs inexprimés.</div>
                    </div>
                    <div class="location-card">
                        <div class="location-name">Café "Midnight Rose"</div>
                        <div class="location-type">Lieu de rendez-vous</div>
                        <div class="location-description">Un café bohème où les créatures de la nuit se retrouvent. L'ambiance tamisée cache bien des mystères.</div>
                    </div>
                    <div class="location-card">
                        <div class="location-name">Cimetière de Moonhaven</div>
                        <div class="location-type">Site historique</div>
                        <div class="location-description">Un ancien cimetière aux tombes ornées. La nuit, on dit que les morts ne reposent pas en paix.</div>
                    </div>
                    <div class="location-card">
                        <div class="location-name">Manoir Blackwood</div>
                        <div class="location-type">Résidence abandonnée</div>
                        <div class="location-description">Une demeure victorienne à l'abandon, théâtre de nombreuses légendes urbaines et point de rassemblement des marginaux.</div>
                    </div>
                <% } %>
            </div>
        </section>

        <!-- Personnages Non-Joueurs -->
        <section class="town-section">
            <h3 class="section-title">Figures Importantes</h3>
            <div class="npcs-section">
                <% if (donnees.pnjs && donnees.pnjs.length > 0) { %>
                    <% donnees.pnjs.forEach(pnj => { %>
                        <div class="npc-entry">
                            <div class="npc-name"><%- pnj.nom %></div>
                            <div class="npc-role"><%- pnj.role || 'Habitant mystérieux' %></div>
                            <div class="npc-description"><%- pnj.description %></div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="npc-entry">
                        <div class="npc-name">Mme Evangeline Crowley</div>
                        <div class="npc-role">Proviseure du Lycée</div>
                        <div class="npc-description">Une femme élégante aux manières victoriennes. Elle semble connaître tous les secrets de la ville et observe tout avec un sourire enigmatique.</div>
                    </div>
                    <div class="npc-entry">
                        <div class="npc-name">Marcus "Mac" Delacroix</div>
                        <div class="npc-role">Propriétaire du Café</div>
                        <div class="npc-description">Un homme charismatique au passé trouble. Son établissement sert de refuge aux créatures marginales de la ville.</div>
                    </div>
                    <div class="npc-entry">
                        <div class="npc-name">Père Antonio Valdez</div>
                        <div class="npc-role">Prêtre de l'Église Sainte-Marie</div>
                        <div class="npc-description">Un homme de foi torturé par les phénomènes surnaturels qu'il observe. Il lutte entre sa croyance et la réalité qui l'entoure.</div>
                    </div>
                <% } %>
            </div>
        </section>

        <!-- Secrets et intrigues -->
        <section class="secrets-section">
            <% if (donnees.secrets && donnees.secrets.length > 0) { %>
                <% donnees.secrets.forEach(secret => { %>
                    <div class="secret-item">
                        <div class="secret-text"><%- secret %></div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="secret-item">
                    <div class="secret-text">Le maire de la ville disparaît chaque pleine lune et revient avec des souvenirs flous...</div>
                </div>
                <div class="secret-item">
                    <div class="secret-text">Les élèves les plus populaires du lycée forment une société secrète aux rituels étranges...</div>
                </div>
                <div class="secret-item">
                    <div class="secret-text">Une ancienne prophétie annonce le réveil d'une entité endormie sous les fondations de la ville...</div>
                </div>
            <% } %>
        </section>

        <!-- Ambiance -->
        <section class="atmosphere-section">
            <p class="atmosphere-text">
                <%- donnees.ambiance || 'Dans les rues pavées de Darkwood Falls, chaque ombre cache un secret et chaque regard rencontré porte en lui une promesse de mystère. Les réverbères victoriens diffusent une lumière dorée qui danse avec la brume perpétuelle, créant un ballet hypnotique entre lumière et obscurité. Ici, les adolescents découvrent que grandir signifie bien plus que simplement vieillir...' %>
            </p>
        </section>

        <!-- Footer -->
        <footer class="document-footer">
            <span class="footer-flourish">❦</span>
            Monsterhearts 2e - Cadre de Ville - Généré le <%- new Date().toLocaleDateString('fr-FR') %>
            <span class="footer-flourish">❦</span>
        </footer>
    </div>
</body>
</html>