<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/PdfKitService.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/PdfKitService.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const PDFDocument = require('pdfkit');
const fs = require('fs');
const fsPromises = require('fs').promises;
const path = require('path');
const SystemRightsService = require('./SystemRightsService');
const DocumentFactory = require('./DocumentFactory');

/**
 * Service de gÃ©nÃ©ration PDF avec PDFKit
 */
class PdfKitService {
    constructor() {
        this.systemRightsService = new SystemRightsService();
        this.outputDir = path.join(process.cwd(), 'output', 'pdfs');
        this.fontsDir = path.join(process.cwd(), 'fonts');
    }

    /**
     * Enregistre les polices Crimson Text dans le document
     * @param {PDFDocument} doc - Document PDFKit
     */
    registerCrimsonTextFonts(doc) {
        try {
            // VÃ©rifier d'abord que les fichiers existent
            const regularPath = path.join(this.fontsDir, 'CrimsonText-Regular.ttf');
            const boldPath = path.join(this.fontsDir, 'CrimsonText-Bold.ttf');
            const italicPath = path.join(this.fontsDir, 'CrimsonText-Italic.ttf');
            const boldItalicPath = path.join(this.fontsDir, 'CrimsonText-BoldItalic.ttf');
            
            if (!fs.existsSync(regularPath) || !fs.existsSync(boldPath) || 
                !fs.existsSync(italicPath) || !fs.existsSync(boldItalicPath)) {
                console.warn('âš ï¸  Crimson Text font files not found, using system fonts');
                return false;
            }
            
            // Essayer d'enregistrer chaque police individuellement pour identifier laquelle pose problÃ¨me
            try {
                doc.registerFont('CrimsonText-Regular', regularPath);
                doc.registerFont('CrimsonText-Bold', boldPath);
                doc.registerFont('CrimsonText-Italic', italicPath);
                doc.registerFont('CrimsonText-BoldItalic', boldItalicPath);
                
                // Tester l'utilisation des polices pour s'assurer qu'elles fonctionnent vraiment
                const currentFont = doc._font;
                const currentFontSize = doc._fontSize;
                
                doc.font('CrimsonText-Regular').fontSize(12);
                doc.font('CrimsonText-Bold').fontSize(12);
                doc.font('CrimsonText-Italic').fontSize(12);
                doc.font('CrimsonText-BoldItalic').fontSize(12);
                
                // Restaurer la police et taille prÃ©cÃ©dentes
                if (currentFont) doc.font(currentFont);
                if (currentFontSize) doc.fontSize(currentFontSize);
                
            } catch (err) {
                console.warn('âš ï¸  Crimson Text fonts not compatible with PDFKit:', err.message);
                return false;
            }
            
            console.log('âœ… Crimson Text fonts loaded and tested successfully');
            return true;
        } catch (error) {
            console.warn('âš ï¸  Error loading Crimson Text fonts, falling back to system fonts:', error.message);
            return false;
        }
    }

    /**
     * GÃ©nÃ¨re un PDF avec PDFKit
     * @param {Object} options - Options de gÃ©nÃ©ration
     * @param {string} options.system - SystÃ¨me de jeu
     * @param {string} options.template - Template Ã  utiliser
     * @param {string} options.titre - Titre du document
     * @param {number|null} options.userId - ID utilisateur
     * @param {string} options.systemRights - Droits systÃ¨me
     * @param {Object} options.data - DonnÃ©es pour le template
     * @returns {Object} - {success, fileName, fullPath, size}
     */
    async generatePDF(options) {
        const {
            system = 'monsterhearts',
            template = 'plan-classe-instructions',
            titre = 'Document',
            userId = null,
            systemRights = 'private',
            data = {}
        } = options;

        try {
            // GÃ©nÃ©rer le nom et chemin du fichier
            const pdfPath = this.systemRightsService.generatePdfPath(
                titre, system, userId, template, systemRights
            );

            // CrÃ©er le rÃ©pertoire de sortie
            const outputDir = path.join(this.outputDir, system);
            await fsPromises.mkdir(outputDir, { recursive: true });

            const fullPath = path.join(outputDir, pdfPath.fileName);

            // GÃ©nÃ©rer le PDF selon le template
            await this.generateTemplate(system, template, fullPath, {
                titre,
                userId,
                systemRights,
                ...data
            });

            // Obtenir la taille du fichier
            const stats = await fsPromises.stat(fullPath);

            return {
                success: true,
                fileName: pdfPath.fileName,
                fullPath,
                size: stats.size,
                system,
                template
            };

        } catch (error) {
            console.error(`Erreur gÃ©nÃ©ration PDF PDFKit:`, error);
            return {
                success: false,
                error: error.message,
                system,
                template
            };
        }
    }

    /**
     * GÃ©nÃ¨re un template spÃ©cifique
     * @param {string} system - SystÃ¨me de jeu
     * @param {string} template - Template Ã  utiliser
     * @param {string} outputPath - Chemin de sortie
     * @param {Object} data - DonnÃ©es pour le template
     */
    async generateTemplate(system, template, outputPath, data) {
        try {
            // Utiliser DocumentFactory pour crÃ©er le bon document
            const document = DocumentFactory.createFromTemplate(system, template);
            
            // GÃ©nÃ©rer le PDF avec le document crÃ©Ã©
            await document.generateDocument(data, outputPath);
            
            console.log(`âœ… PDF gÃ©nÃ©rÃ© avec succÃ¨s: ${template} (${system})`);
            
        } catch (error) {
            console.error(`âŒ Erreur gÃ©nÃ©ration template ${system}/${template}:`, error.message);
            
            // Fallback vers l'ancienne mÃ©thode pour Monsterhearts si la nouvelle Ã©choue
            if (system === 'monsterhearts' &amp;&amp; template.includes('plan-classe-instructions')) {
                console.log('ðŸ”„ Fallback vers l\'ancienne mÃ©thode...');
                return await this.generateMonsterheartsTemplate(template, outputPath, data);
            }
            
            throw error;
        }
    }

    /**
     * GÃ©nÃ¨re les templates Monsterhearts
     * @param {string} template - Template spÃ©cifique
     * @param {string} outputPath - Chemin de sortie
     * @param {Object} data - DonnÃ©es
     */
    async generateMonsterheartsTemplate(template, outputPath, data) {
        switch (template) {
            case 'plan-classe-instructions':
            case 'plan-classe-instructions-test':
                return await this.generatePlanClasseInstructions(outputPath, data);
            
            default:
                throw new Error(`Template Monsterhearts ${template} non supportÃ©`);
        }
    }

    /**
     * GÃ©nÃ¨re le template "Plan de Classe - Instructions"
     * @param {string} outputPath - Chemin de sortie
     * @param {Object} data - DonnÃ©es du document
     */
    async generatePlanClasseInstructions(outputPath, data) {
        return new Promise((resolve, reject) => {
            try {
                // CrÃ©er le document PDF
                const doc = new PDFDocument({
                    size: 'A4',
                    margins: {
                        top: 20,
                        bottom: 20,
                        left: 25,
                        right: 20
                    }
                });

                // Enregistrer les polices Crimson Text
                const hasCrimsonText = this.registerCrimsonTextFonts(doc);

                // Stream vers le fichier
                const stream = fs.createWriteStream(outputPath);
                doc.pipe(stream);

                // GÃ©nÃ©rer le contenu
                this.createPlanClasseInstructionsContent(doc, data, hasCrimsonText);

                // Finaliser le document
                doc.end();

                // Attendre la fin de l'Ã©criture
                stream.on('finish', () => resolve());
                stream.on('error', reject);

            } catch (error) {
                reject(error);
            }
        });
    }

    /**
     * CrÃ©e le contenu du document "Plan de Classe - Instructions"
     * @param {PDFDocument} doc - Document PDFKit
     * @param {Object} data - DonnÃ©es
     * @param {boolean} hasCrimsonText - Si les polices Crimson Text sont disponibles
     */
    createPlanClasseInstructionsContent(doc, data, hasCrimsonText = false) {
        const pageWidth = doc.page.width;
        const pageHeight = doc.page.height;
        const sidebarWidth = 15 * 2.83; // 15mm en points

        // Polices selon disponibilitÃ© Crimson Text (dÃ©finir au dÃ©but pour les deux pages)
        const titleFont = hasCrimsonText ? 'CrimsonText-Bold' : 'Helvetica-Bold';
        const textFont = hasCrimsonText ? 'CrimsonText-Regular' : 'Helvetica';
        const italicFont = hasCrimsonText ? 'CrimsonText-Italic' : 'Helvetica-Oblique';
        
        // Page 1 (impaire - barre Ã  gauche)
        const isOddPage = true;
        const sidebarX = isOddPage ? 0 : pageWidth - sidebarWidth;
        
        // Barre latÃ©rale noire
        doc.fillColor('#000000')
           .rect(sidebarX, 0, sidebarWidth, pageHeight)
           .fill();
        
        // NumÃ©ro de page dans un carrÃ© noir - SANS width/align
        const pageNumX = 7;
        const pageNumY = 28;

        doc.fillColor('#000000')
           .rect(pageNumX, pageNumY, 28, 28)
           .fill();

        doc.fontSize(18)
           .fillColor('white')
           .text('1', pageNumX + 10, pageNumY + 5);

        // Contenu principal page 1 avec polices appropriÃ©es
        const contentX = sidebarWidth + 15;
        
        doc.fontSize(18)
           .font(titleFont)
           .fillColor('#000000')
           .text('OBJECTIFS', contentX, 80);
           
        doc.fontSize(12)
           .font(textFont)
           .fillColor('#000000')
           .text('S\'asseoir Ã  une table de ', contentX, 120);
           
        // Mot "Monsterhearts" en italique
        doc.font(italicFont)
           .text('Monsterhearts', contentX + 130, 120);
           
        doc.font(textFont)
           .text(' signifie partager les quatre objectifs suivants :', contentX, 140);

        // Liste des objectifs avec Ã©toiles
        let y = 170;
        const objectifs = [
            'rendre intÃ©ressante la vie de chaque personnage principal ;',
            'ne pas mettre l\'histoire en cage ;',
            'dire ce que les rÃ¨gles exigent ;',
            'dire ce que l\'honnÃªtetÃ© exige.'
        ];

        objectifs.forEach(objectif => {
            doc.fontSize(12)
               .font(textFont)
               .fillColor('#000000')
               .text('â˜… ' + objectif, contentX + 10, y);
            y += 18;
        });

        y += 20;
        // Paragraphe explicatif complet
        doc.fontSize(12)
           .font(textFont)
           .fillColor('#000000')
           .text('Cette liste n\'est ni Ã  mÃ©moriser, ni constituÃ©e', contentX, y);
        y += 15;
        doc.text('d\'Ã©lÃ©ments qu\'il faudrait cocher au cours de la', contentX, y);
        y += 15;
        doc.text('partie pour la considÃ©rer comme Â« rÃ©ussie Â».', contentX, y);
        y += 15;
        doc.text('Il s\'agit plutÃ´t de quatre lignes directrices qui', contentX, y);
        y += 15;
        doc.text('vous aident Ã  aller dans la mÃªme direction et', contentX, y);
        y += 15;
        doc.text('Ã  partager l\'esprit du jeu.', contentX, y);

        y += 30;
        // Section suivante
        doc.fontSize(16)
           .font(titleFont)
           .fillColor('#000000')
           .text('Rendez intÃ©ressante la vie', contentX, y);
        y += 20;
        doc.text('de chaque personnage principal', contentX, y);

        y += 25;
        doc.fontSize(12)
           .font(textFont)
           .fillColor('#000000')
           .text('Si vous n\'Ãªtes pas MC, votre tÃ¢che est notamment', contentX, y);
        y += 15;
        doc.text('de dÃ©fendre les intÃ©rÃªts de votre personnage.', contentX, y);

        // Texte vertical APRÃˆS le contenu pour Ã©viter les interfÃ©rences
        doc.save()
           .translate(sidebarWidth/2, pageHeight - 100)
           .rotate(-90)
           .fontSize(14)
           .font('Helvetica-Bold')
           .fillColor('white')
           .text('COMMENT MARCHE-T-ELLE', 0, 0)
           .restore();

        // Footer watermark discret mais visible - coin bas droite
        doc.fontSize(8)
           .fillColor('#999999')
           .text('brumisater', pageWidth - 65, pageHeight - 40);

        // Page 2 (paire - barre Ã  droite)
        doc.addPage();
        
        // Barre latÃ©rale noire Ã  droite
        const sidebarX2 = pageWidth - sidebarWidth;
        doc.fillColor('#000000')
           .rect(sidebarX2, 0, sidebarWidth, pageHeight)
           .fill();
        
        // NumÃ©ro de page 2 - SANS width/align
        const pageNumX2 = pageWidth - sidebarWidth + 7;
        doc.fillColor('#000000')
           .rect(pageNumX2, pageNumY, 28, 28)
           .fill();

        doc.fontSize(18)
           .fillColor('white')
           .text('2', pageNumX2 + 10, pageNumY + 5);

        // Contenu principal page 2 avec polices appropriÃ©es
        const contentX2 = 20;
        
        // Utiliser les mÃªmes polices que page 1
        doc.fontSize(18)
           .font(titleFont)
           .fillColor('#000000')
           .text('EXEMPLES DE PLANS DE CLASSE', contentX2, 80);
           
        doc.fontSize(14)
           .font(titleFont)
           .fillColor('#000000')
           .text('SITUATION INITIALE - DÃ‰BUT DE CAMPAGNE', contentX2, 120);

        doc.fontSize(12)
           .font(titleFont)
           .fillColor('#000000')
           .text('CLASSE DE LITTÃ‰RATURE - MRS. HENDERSON', contentX2, 150);

        doc.fontSize(12)
           .font(textFont)
           .fillColor('#000000')
           .text('Voici un exemple de plan initial pour une nouvelle', contentX2, 180);
        doc.text('campagne avec 4 PJ :', contentX2, 195);

        // EncadrÃ© exemple dÃ©taillÃ©
        let y2 = 220;
        doc.fontSize(11)
           .font(titleFont)
           .fillColor('#000000')
           .text('CONFIGURATION INITIALE', contentX2, y2);
        y2 += 20;

        const exemples = [
            'â€¢ Alexis (The Chosen) - Premier rang, centre :',
            '  excellent Ã©lÃ¨ve, discret sur sa nature',
            'â€¢ Morgan (The Witch) - DeuxiÃ¨me rang, gauche :',
            '  lÃ©gÃ¨rement en retrait, observateur',
            'â€¢ Jordan (The Mortal) - TroisiÃ¨me rang, centre :',
            '  populaire, entourÃ© d\'amis',
            'â€¢ Casey (The Vampire) - Dernier rang, coin :',
            '  mystÃ©rieux, arrivÃ© rÃ©cemment'
        ];

        exemples.forEach(exemple => {
            doc.fontSize(11)
               .font(textFont)
               .fillColor('#000000')
               .text(exemple, contentX2, y2);
            y2 += 13;
        });

        // Texte vertical page 2 APRÃˆS le contenu
        doc.save()
           .translate(pageWidth - sidebarWidth/2, pageHeight - 100)
           .rotate(-90)
           .fontSize(14)
           .font('Helvetica-Bold')
           .fillColor('white')
           .text('EXEMPLES', 0, 0)
           .restore();

        // Footer watermark discret mais visible - coin bas gauche (Ã©viter la barre droite)
        doc.fontSize(8)
           .fillColor('#999999')
           .text('brumisater', 15, pageHeight - 40);
    }

    /**
     * Ajoute les Ã©lÃ©ments communs de page Monsterhearts
     * @param {PDFDocument} doc - Document
     * @param {number} pageNum - NumÃ©ro de page
     * @param {string} sectionTitle - Titre de section pour la barre latÃ©rale
     * @param {boolean} isOddPage - true pour page impaire (bande Ã  gauche), false pour page paire (bande Ã  droite)
     */
    addMonsterheartsPage(doc, pageNum, sectionTitle, isOddPage = true) {
        const pageWidth = doc.page.width;
        const pageHeight = doc.page.height;
        const sidebarWidth = 15 * 2.83; // 15mm en points

        // Position de la bande latÃ©rale selon page paire/impaire
        const sidebarX = isOddPage ? 0 : pageWidth - sidebarWidth;

        // Bande latÃ©rale noire - forcer le rendu
        doc.fillColor('#000000')
           .rect(sidebarX, 0, sidebarWidth, pageHeight)
           .fill();

        // NumÃ©ro de page dans un carrÃ© noir
        const pageNumSize = 10 * 2.83; // 10mm
        const pageNumX = isOddPage ? 
            2.5 * 2.83 : // 2.5mm du bord gauche pour pages impaires
            pageWidth - sidebarWidth + 2.5 * 2.83; // 2.5mm du dÃ©but de la bande pour pages paires
        const pageNumY = 10 * 2.83; // 10mm du haut

        doc.fillColor('#000000')
           .rect(pageNumX, pageNumY, pageNumSize, pageNumSize)
           .fill();

        doc.fontSize(18)
           .fillColor('white')
           .text(pageNum.toString(), pageNumX, pageNumY + pageNumSize/4, {
               width: pageNumSize,
               align: 'center'
           });

        // Texte vertical dans la bande latÃ©rale
        const textX = isOddPage ? sidebarWidth/2 : pageWidth - sidebarWidth/2;
        doc.save()
           .translate(textX, pageHeight - 40 * 2.83)
           .rotate(-90)
           .fontSize(14)
           .font('Helvetica-Bold')
           .fillColor('white')
           .text(sectionTitle, 0, 0, {
               width: 400,
               align: 'center'
           })
           .restore();

        // Footer adaptÃ© selon la position de la bande
        const footerY = pageHeight - 10 * 2.83;
        const footerX = isOddPage ? sidebarWidth + 10 : 10;
        const footerWidth = isOddPage ? 
            pageWidth - sidebarWidth - 30 : 
            pageWidth - sidebarWidth - 30;

        doc.fontSize(9)
           .fillColor('#666666')
           .text(`Monsterhearts â€¢ Plan de Classe â€¢ brumisater`, 
                 footerX, footerY, {
                   width: footerWidth,
                   align: 'center'
                 });

        // Reset pour le contenu
        doc.fillColor('#000000');
    }

    /**
     * Contenu de la page 1 - Instructions principales (style exemple-page.png)
     */
    addPageContent1(doc, x, width, data, hasCrimsonText = false) {
        let y = 80; // Plus d'espace en haut comme dans l'exemple

        // Polices comme dans l'exemple Monsterhearts
        const titleFont = hasCrimsonText ? 'CrimsonText-Bold' : 'Helvetica-Bold';
        const textFont = hasCrimsonText ? 'CrimsonText-Regular' : 'Helvetica';
        const italicFont = hasCrimsonText ? 'CrimsonText-Italic' : 'Helvetica-Oblique';

        // Test simple pour vÃ©rifier que le contenu reste sur la mÃªme page
        doc.fontSize(18)
           .font(titleFont)
           .fillColor('#000000')
           .text('OBJECTIFS - PAGE 1', x, y, {
               width: width,
               align: 'left',
               lineBreak: false
           });
        y += 40;

        doc.fontSize(12)
           .font(textFont)
           .fillColor('#000000')
           .text('Contenu de test pour la page 1. Ce texte devrait apparaÃ®tre sur la mÃªme page que la barre latÃ©rale noire de gauche.', x, y, {
               width: width,
               align: 'left',
               lineBreak: false
           });
    }

    /**
     * Contenu de la page 2 - Exemples
     */
    addPageContent2(doc, x, width, data, hasCrimsonText = false) {
        let y = 80;
        
        const titleFont = hasCrimsonText ? 'CrimsonText-Bold' : 'Helvetica-Bold';
        const textFont = hasCrimsonText ? 'CrimsonText-Regular' : 'Helvetica';

        // Test simple pour vÃ©rifier que le contenu reste sur la mÃªme page
        doc.fontSize(18)
           .font(titleFont)
           .fillColor('#000000')
           .text('EXEMPLES - PAGE 2', x, y, {
               width: width,
               align: 'left',
               lineBreak: false
           });
        y += 40;

        doc.fontSize(12)
           .font(textFont)
           .fillColor('#000000')
           .text('Contenu de test pour la page 2. Ce texte devrait apparaÃ®tre sur la mÃªme page que la barre latÃ©rale noire de droite.', x, y, {
               width: width,
               align: 'left',
               lineBreak: false
           });
    }

    /**
     * Contenu de la page 3 - Conseils
     */
    addPageContent3(doc, x, width, data) {
        let y = 50;

        doc.fontSize(16)
           .font('Helvetica-Bold')
           .fillColor('#000000')
           .text('CONSEILS PRATIQUES', x, y, {
               width: width,
               align: 'center'
           });
        y += 40;

        y = this.addSubSection(doc, x, width, y, 'UTILISATION EN JEU', [
            'Les bureaux sont dÃ©plaÃ§ables : ajustez selon l\'Ã©volution des relations',
            'Un changement de place peut signaler un Ã©vÃ©nement social majeur',
            'Consultez le plan pour dÃ©terminer qui remarque quoi'
        ]);

        y = this.addSubSection(doc, x, width, y, 'ENTRE LES SESSIONS', [
            'Mettez Ã  jour aprÃ¨s chaque session',
            'Notez les changements majeurs dans les relations',
            'Ajoutez de nouveaux PNJ si nÃ©cessaire',
            'Retirez ou mettez en retrait les personnages absents/morts'
        ]);
    }

    /**
     * Contenu de la page 4 - RÃ©fÃ©rences
     */
    addPageContent4(doc, x, width, data) {
        let y = 50;

        doc.fontSize(16)
           .font('Helvetica-Bold')
           .fillColor('#000000')
           .text('RÃ‰FÃ‰RENCES ET RESSOURCES', x, y, {
               width: width,
               align: 'center'
           });
        y += 40;

        y = this.addSubSection(doc, x, width, y, 'SYMBOLES UTILES', [
            'â™¥ : amoureux',
            'âš¡ : conflit actif',
            'â— : sait un secret',
            'â˜… : populaire/influent',
            'â˜¾ : nature monstrueuse connue'
        ]);

        y = this.addSubSection(doc, x, width, y, 'VERSION NUMÃ‰RIQUE VS PAPIER', []);
        
        y = this.addSubSubSection(doc, x, width, y, 'VERSION NUMÃ‰RIQUE', [
            'Bureaux dÃ©plaÃ§ables par glisser-dÃ©poser',
            'Facile Ã  mettre Ã  jour',
            'Peut Ãªtre partagÃ©e en ligne'
        ]);

        y = this.addSubSubSection(doc, x, width, y, 'VERSION PAPIER', [
            'Utilisez des post-its pour les bureaux',
            'Permet des annotations rapides',
            'Plus tactile pendant la partie'
        ]);
    }

    /**
     * Ajoute une sous-section avec titre et liste (style original)
     */
    addSubSection(doc, x, width, y, title, items, titleFont = 'Helvetica-Bold', textFont = 'Helvetica') {
        doc.fontSize(12)
           .font(titleFont)
           .fillColor('#000000')
           .text(title, x, y);
        y += 20;

        doc.font(textFont)
           .fontSize(11)
           .fillColor('#000000');

        items.forEach(item => {
            doc.text(`â˜… ${item}`, x, y, { width: width });
            y += 15;
        });

        return y + 12;
    }

    /**
     * Ajoute une sous-sous-section (style original)
     */
    addSubSubSection(doc, x, width, y, title, items, titleFont = 'Helvetica-Bold', textFont = 'Helvetica') {
        doc.fontSize(11)
           .font(titleFont)
           .fillColor('#000000')
           .text(title, x + 10, y);
        y += 15;

        doc.font(textFont)
           .fontSize(10)
           .fillColor('#000000');

        items.forEach(item => {
            doc.text(`â˜… ${item}`, x + 20, y, { width: width - 20 });
            y += 12;
        });

        return y + 10;
    }
}

module.exports = PdfKitService;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Actualite.html">Actualite</a></li><li><a href="AdminController.html">AdminController</a></li><li><a href="AdminOracleService.html">AdminOracleService</a></li><li><a href="AnonymousTokenService.html">AnonymousTokenService</a></li><li><a href="AuthentificationController.html">AuthentificationController</a></li><li><a href="BaseController.html">BaseController</a></li><li><a href="BaseModel.html">BaseModel</a></li><li><a href="BasePdfKitService.html">BasePdfKitService</a></li><li><a href="BaseService.html">BaseService</a></li><li><a href="CacheService.html">CacheService</a></li><li><a href="CharacterSheetDocument.html">CharacterSheetDocument</a></li><li><a href="ClassPlanDocument.html">ClassPlanDocument</a></li><li><a href="DangerDocument.html">DangerDocument</a></li><li><a href="DemandeChangementEmail.html">DemandeChangementEmail</a></li><li><a href="Document.html">Document</a></li><li><a href="DocumentFactory.html">DocumentFactory</a></li><li><a href="DocumentModerationHistorique.html">DocumentModerationHistorique</a></li><li><a href="DocumentModerationService.html">DocumentModerationService</a></li><li><a href="DocumentSystemeJeu.html">DocumentSystemeJeu</a></li><li><a href="DocumentVote.html">DocumentVote</a></li><li><a href="DonationController.html">DonationController</a></li><li><a href="EmailService.html">EmailService</a></li><li><a href="EmailTemplate.html">EmailTemplate</a></li><li><a href="EngrenagesTheme.html">EngrenagesTheme</a></li><li><a href="GenericDocument.html">GenericDocument</a></li><li><a href="GroupDocument.html">GroupDocument</a></li><li><a href="HomeController.html">HomeController</a></li><li><a href="LoggingService.html">LoggingService</a></li><li><a href="MaintenanceWorker.html">MaintenanceWorker</a></li><li><a href="MarkdownService.html">MarkdownService</a></li><li><a href="Metro2033Theme.html">Metro2033Theme</a></li><li><a href="MistEngineTheme.html">MistEngineTheme</a></li><li><a href="ModerationController.html">ModerationController</a></li><li><a href="MonsterheartsTheme.html">MonsterheartsTheme</a></li><li><a href="Newsletter.html">Newsletter</a></li><li><a href="NewsletterService.html">NewsletterService</a></li><li><a href="Oracle.html">Oracle</a></li><li><a href="OracleController.html">OracleController</a></li><li><a href="OracleItem.html">OracleItem</a></li><li><a href="OracleService.html">OracleService</a></li><li><a href="OrganizationDocument.html">OrganizationDocument</a></li><li><a href="Pdf.html">Pdf</a></li><li><a href="PdfController.html">PdfController</a></li><li><a href="PdfKitService.html">PdfKitService</a></li><li><a href="PdfService.html">PdfService</a></li><li><a href="PerformanceMiddleware.html">PerformanceMiddleware</a></li><li><a href="PerformanceMonitoringService.html">PerformanceMonitoringService</a></li><li><a href="Personnage.html">Personnage</a></li><li><a href="PersonnageController.html">PersonnageController</a></li><li><a href="PersonnageService.html">PersonnageService</a></li><li><a href="ProductionApp.html">ProductionApp</a></li><li><a href="QueueService.html">QueueService</a></li><li><a href="QueueWorker.html">QueueWorker</a></li><li><a href="RgpdConsentement.html">RgpdConsentement</a></li><li><a href="RgpdService.html">RgpdService</a></li><li><a href="SecurityService.html">SecurityService</a></li><li><a href="ShareService.html">ShareService</a></li><li><a href="SystemCardViewModel.html">SystemCardViewModel</a></li><li><a href="SystemMaintenanceService.html">SystemMaintenanceService</a></li><li><a href="SystemRightsService.html">SystemRightsService</a></li><li><a href="SystemService.html">SystemService</a></li><li><a href="SystemTheme.html">SystemTheme</a></li><li><a href="SystemThemeService.html">SystemThemeService</a></li><li><a href="SystemeJeu.html">SystemeJeu</a></li><li><a href="Temoignage.html">Temoignage</a></li><li><a href="TemoignageService.html">TemoignageService</a></li><li><a href="TemplateService.html">TemplateService</a></li><li><a href="TownDocument.html">TownDocument</a></li><li><a href="Utilisateur.html">Utilisateur</a></li><li><a href="UtilisateurService.html">UtilisateurService</a></li><li><a href="VoteController.html">VoteController</a></li><li><a href="VoteService.html">VoteService</a></li><li><a href="ZombiologyTheme.html">ZombiologyTheme</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Joi">Joi</a></li><li><a href="global.html#asyncHandler">asyncHandler</a></li><li><a href="global.html#auth">auth</a></li><li><a href="global.html#compareVersions">compareVersions</a></li><li><a href="global.html#createError">createError</a></li><li><a href="global.html#createMigrationsTable">createMigrationsTable</a></li><li><a href="global.html#createTables">createTables</a></li><li><a href="global.html#database">database</a></li><li><a href="global.html#executeMigration">executeMigration</a></li><li><a href="global.html#getCurrentVersion">getCurrentVersion</a></li><li><a href="global.html#getErrorMessage">getErrorMessage</a></li><li><a href="global.html#getExecutedMigrations">getExecutedMigrations</a></li><li><a href="global.html#getMigrationStatus">getMigrationStatus</a></li><li><a href="global.html#getVersionsToMigrate">getVersionsToMigrate</a></li><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#handleNotFound">handleNotFound</a></li><li><a href="global.html#initializeDatabase">initializeDatabase</a></li><li><a href="global.html#isDatabaseInitialized">isDatabaseInitialized</a></li><li><a href="global.html#logger">logger</a></li><li><a href="global.html#markMigrationExecuted">markMigrationExecuted</a></li><li><a href="global.html#migrateDatabase">migrateDatabase</a></li><li><a href="global.html#migrateToLatest">migrateToLatest</a></li><li><a href="global.html#migrateToVersion">migrateToVersion</a></li><li><a href="global.html#migrations">migrations</a></li><li><a href="global.html#optionalAuth">optionalAuth</a></li><li><a href="global.html#path">path</a></li><li><a href="global.html#requireAdmin">requireAdmin</a></li><li><a href="global.html#requireAuth">requireAuth</a></li><li><a href="global.html#requirePremium">requirePremium</a></li><li><a href="global.html#resetDatabase">resetDatabase</a></li><li><a href="global.html#rollbackMigration">rollbackMigration</a></li><li><a href="global.html#schemas">schemas</a></li><li><a href="global.html#updateAppVersion">updateAppVersion</a></li><li><a href="global.html#validateFiles">validateFiles</a></li><li><a href="global.html#validateRequest">validateRequest</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Aug 08 2025 18:17:39 GMT+0200 (heure dâ€™Ã©tÃ© dâ€™Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
